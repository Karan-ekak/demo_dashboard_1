<!--
  File: alert4.html
  Description: Inventory Management and Safety Reports Dashboard for Ekak Argus.
  This template displays summary cards, charts, tables, and interactive UI elements for inventory and safety management.
  
  Main Features:
    - Responsive dashboard layout with cards for key metrics (violations, compliance, severity, etc.)
    - Interactive date range selector using Flatpickr
    - Multiple Chart.js visualizations (Aisle Utilisation, Restock vs Reschedule, Empty Slots)
    - Custom bar chart for shelf utilisation (loading/unloading/idle)
    - Table for transit/stock records
    - Bootstrap tooltips and navigation loader
    - DataTables and export functionality
    - Custom styles for modern UI

  Each script block is explained with comments below for clarity.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <title>Safety Reports | Ekak</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- HTML5 Shim and Respond.js IE11 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 11]>
    	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    	<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    	<![endif]-->
  <!-- Meta -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Ekak Innovation | Argus">
  <meta name="keywords" content="Ekak,Argus,Innovation,EkakInn,ArgusEkak">
  <meta name="author" content="Argus">
  <link rel="shortcut icon" href="{{ url_for('static',filename='favicon.ico')}}">

  <!-- vendor css -->
  <link rel="stylesheet" href="{{ url_for('static' , filename='css/style.css') }}">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.3.6/css/buttons.dataTables.min.css">

  <style>
    tfoot input {
      width: 100%;
      padding: 3px;
      box-sizing: border-box;
    }

    @media (max-width: 768px) {
      .card-header .btn-group .btn {
        width: 100%;
      }
    }
  </style>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,430;1,430&display=swap');
  </style>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <style>
    body {
      background: #f9f9f9;
      font-family: 'Segoe UI', sans-serif;
    }

    .card {
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
      border: none;
      border-radius: 10px;

    }

    .info-icon {
      width: 12px;
      height: 12px;
      margin-left: 6px;
      cursor: pointer;
    }

    #loadingScreen {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.85);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .loading-card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    #loading-text {
      font-size: 18px;
      margin-top: 10px;
    }


    .card-transit {
      border: none;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
      padding: 20px;
      margin-bottom: 20px;
      background-color: white;
    }

    .bar-label-transit {
      display: flex;
      justify-content: space-between;
    }

    .bar-transit {
      height: 6px;
      background-color: white;
      border-radius: 3px;
      margin: 5px 0;
      position: relative;
    }

    .bar-fill-transit {
      height: 100%;
      border-radius: 3px;
      background-color: #4CAF50;
      position: absolute;
      top: 0;
      left: 0;
    }

    .table-responsive {
      font-size: 14px;
    }

    .tooltip-inner {
      background-color: #fff !important;
      color: #000 !important;
      border: 1px solid #ccc;
    }




    .toggle {
      display: flex;
      gap: 8px;
      margin-top: 10px;
    }

    .toggle-btn {
      padding: 5px 14px;
      font-size: 10px;
      border: none;
      border-radius: 20px;
      background-color: #f0f0f0;
      color: #333;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .toggle-btn:hover {
      background-color: #0A5D6B;
      color: #000;
    }

    .toggle-btn.active {
      background-color: #004d40;
      color: #fff;
    }

    @media (max-width: 500px) {
      .card-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .toggle {
        margin-top: 10px;
      }
    }

    .head-align {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .info-icons {
      height: 17px;
      width: 170px;
      border-radius: 50%;
      border: 1px solid #353535d3;
      padding: 3px;
      background-color: #fff;
      object-fit: contain;

      margin: 0px 223px 7px -114px;
    }

    .crd {

      border-radius: 10px;
      padding: 50px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
      margin-bottom: 20px
    }

    .tooltip.bs-tooltip-top .tooltip-arrow::before,
    .tooltip.bs-tooltip-bottom .tooltip-arrow::before,
    .tooltip.bs-tooltip-start .tooltip-arrow::before,
    .tooltip.bs-tooltip-end .tooltip-arrow::before {
      border-color: #fff !important;
    }
  </style>

</head>

<body class="" style="background-color: #F2F1F1;font-family: 'Red Hat Display', serif;
font-optical-sizing: auto;
font-weight: 430;
font-style: normal;">


  <div id="loadingScreen">
    <div id="loaderContent" class="loading-card">
      <div class="spinner-border text-primary" role="status"></div>
      <p id="loading-text"> Finalizing results to deliver precise observations</p>
    </div>
  </div>
  <nav class="pcoded-navbar menu-light ">

    <div class="navbar-content scroll-div ">

      <!-- Import from base  -->

      {% include "base_admin__side_bar.html" %}
      <div class="bottom">
        <img src="/static/images/Group 1.png" alt="Upgrade to Pro Plan" />

        <!-- <div class="container-fluid px-0">
                      <div class="row align-items-center footer-bottom">
                        <div class="col-auto mt-3">
                          <img src="/static/images/Argus Updated Logo (2).png" alt="Logo" class="footer-logo" />
                        </div>
                        <div class="col text-end">
                          <div class="help-text">Need Help ?</div>
                        </div>
                      </div>
                    </div> -->
      </div>

      <style>
        .bottom {
          width: 100%;
          padding: 0 15px;
          margin-top: 50px;
        }

        .bottom img:first-child {
          width: 100%;
          display: block;
          margin: 0 auto 15px auto;
          border-radius: 10px;
        }

        .footer-bottom {
          white-space: nowrap;
        }

        .footer-logo {
          height: 30px;
          width: 18px;
          justify-content: center;
        }

        .help-text {
          font-size: 12px;
          color: black;
        }
      </style>


    </div>

  </nav>
  <!-- [ navigation menu ] end -->
  <!-- [ Header ] start -->
  {% include "base_header.html" %}


  <style>
    /* Reset default body spacing */
    body {
      margin: 0;
      padding: 0;
    }

    /* Custom header styling */
    .safety-header {
      padding: 1rem 1.5rem;
      /* top/bottom 16px, left/right 24px */
      background-color: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0);
    }

    .safety-header h4 {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 600;
    }

    .safety-header .controls {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      border-radius: 5px;
      border-color: #000;
    }

    @media (max-width: 576px) {
      .safety-header {
        flex-direction: column;
        align-items: stretch;
        gap: 0.75rem;
      }

      .safety-header .controls {
        justify-content: flex-end;
      }
    }

    .bd {
      background-color: #0A5D6B;
      color: #fff;
      border-radius: 10px;
    }

    .bds {
      width: 25px;
      border-radius: 50px;
    }
  </style>

  <!-- [ Header ] end -->


  <div class="pcoded-main-container">
    <div class="pcoded-content" style="background-color: #F2F1F1;">
      <!-- [ breadcrumb ] start -->
      <div class="page-header">
        <div class="page-block">
          <div class="row align-items-center">
            <div class="col-md-12">
              <ul class="breadcrumb">
                <!-- <li class="breadcrumb-item"><a href="index.html"><i class="feather icon-home"></i></a></li> -->
                <li class="breadcrumb-item"><a href="#!"> Home > Inventory Management</a></li>
              </ul>
              <!-- <div class="page-header-title">
                <h5 class="m-b-10" style="font-size:18px; font-weight:bold;">Safety Report</h5>
              </div> -->
              <header class="safety-header">
                <h4>Inventory Management</h4> 
                <div class="controls">
                  <div class="input-group input-group-sm search-group">
                    <span class="input-group-text bg-white border-end-0"><i class="bi bi-search"></i></span>
                    <input type="search" class="form-control border-start-0" placeholder="Search" aria-label="Search">
                  </div>
                  <button class="btn bd btn-sm">Download</button>
                  <button class="btn  btn-warning btn-sm  "><img src="../static/images/Message circle.png" alt=""
                      class="bds"></button>
                  <button class="btn btn-warning btn-sm"><img src="../static/images/account_circle.png" alt=""
                      class="bds"></button>
                  <button class="btn btn-warning btn-sm"><img src="../static/images/Shutdown.png" alt=""
                      class="bds"></button>
                </div>
              </header>

            </div>
          </div>


        </div>
      </div>





      <div class="row align-items-center mt-4" style="padding:10px">
        <!-- Left side: Date Range and Save Button in a Row inside col-md-6 -->

        <div class="row">
          <!-- Start Date Selector -->
          <div class="col-auto">
            <div class="input-group">
              <input type="text" id="dateRangeSelector" placeholder="DD/MM/YY" class="form-control ml-1"
                style="border-radius: 8px; padding-left: 10px;background-color:#fff">
            </div>
          </div>



          <!-- Save Button -->
          <div class="col-auto">
            <!-- <button class="btn" id="save-time" style="border-radius: 12px; background-color:#0c6980; color:white">
                                Sort
                            </button> -->
            <div class="input-group">
              <input type="date" id="dateRangeSelector" placeholder="DD/MM/YY" class="form-control ml-1"
                style="border-radius: 8px; padding-left: 10px;background-color:#fff">
            </div>
          </div>

        </div>



      </div>

      <style>
        #startTimeSelector:focus,
        #endTimeSelector:focus,
        #dateRangeSelector:focus {
          border-color: #0c6980 !important;

          outline: none !important;
        }

        #startTimeSelector:hover,
        #endTimeSelector:hover,
        #dateRangeSelector:focus {
          border-color: #0c6980 !important;

        }


        .flatpickr-calendar {
          border-radius: 15px !important;
          border: 2px solid #0c6980 !important;
          background-color: #f1f1f1;
        }


        .flatpickr-day.selected {
          background-color: #0c6980 !important;
          color: #fff !important;
          border-radius: 50% !important;
        }

        .flatpickr-day {
          border-radius: 0 !important;
        }


        .flatpickr-day:hover {
          background-color: #0c6980 !important;
          color: #fff !important;
          cursor: pointer;
        }

        @media (max-width: 576px) {
          .input-group input {
            font-size: 12px !important;
            padding: 2px 4px !important;
            width: 150px !important;
          }

          #save-time {
            font-size: 12px !important;
            padding: 8px 10px !important;
            width: 290px;
            border-radius: 10px;
            margin-top: 5px;

          }

          .col-auto {
            flex: 1 1 auto;
            text-align: center;
          }

          .row.g-2 {
            gap: 2px;
            justify-content: center;
          }
        }
      </style>

      <script>
        // Flatpickr date range selector for filtering data by date range.
        // On close, stores selected dates in the save button's dataset for later use.
        document.addEventListener('DOMContentLoaded', function () {
          flatpickr("#dateRangeSelector", {
            mode: "range",
            dateFormat: "Y-m-d",
            onClose: function (selectedDates) {
              if (selectedDates.length === 1) {
                let startDate = new Date(selectedDates[0]);
                let dateArray = [];
                let currentDate = startDate;
                document.getElementById('save-time').dataset.selectedDates = JSON.stringify(dateArray);
              }
            }
          });
        });

        // Handles the click event for the save button, redirects to alert2 with selected date range as query param.
        document.getElementById('save-time').addEventListener('click', function () {
          const selectedDates = this.dataset.selectedDates;
          let url = `{{ url_for('alert2') }}?`;
          if (selectedDates) {
            url += `selectedDates=${selectedDates}`;
          }
          window.location.href = url;
        });
      </script>

      <!-- Table for displaying incidents -->
      <!-- After heading section -->
      <!-- CSS FOR AFTER HEADING SECTION  -->

      <style>
        body {
          font-family: 'Segoe UI', sans-serif;
          background: #f8f8f8;
          margin: 20px;
        }

        .card-row {
          display: flex;
          gap: 20px;
          justify-content: space-between;
          flex-wrap: wrap;
        }

        .card {
          background: white;
          border-radius: 10px;
          padding: 15px 20px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
          flex: 1 1 22%;
          min-width: 200px;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
        }

        .card-highlight {
          background: #3A974C;
          color: white;
          width: 250px;
          height: 190px;
          border-radius: 20px;

        }

        .card .card-header {
          border-bottom: 1px solid #fdfeff;
          position: relative;
        }

        .card-header {
          font-size: 20px;
          font-weight: 500;
          color: #767474;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .card-header.small-text {
          font-size: 20px;
          font-weight: 600;
          color: #fff;
        }

        .card-content {
          margin-top: 10px;
          margin-left: 20px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .card-content.center {
          justify-content: center;
        }

        .main-value {
          font-size: 35px;
          font-weight: none;
        }

        .main-values {
          font-size: 35px;
          font-weight: none;
          color: #fff;
          margin-left: -61px;
        }

        .icon {
          width: 32px;
          height: 32px;
          background: #e0eef2;
          border-radius: 8px;
          padding: 4px;
        }

        .menu {
          font-size: 25px;
          cursor: pointer;
          font-weight: bold;
        }
      </style>
      <!-- HTML FOR AFTER HEADING SECTION -->


        <style>
          * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
          }

          body {
            margin: 0;
            padding: 2rem;
            background: #f9f9fb;
          }

          .dashboard {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
          }

          .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
          }

          .card h3 {
            margin: 0 0 1rem;
            font-size: 1.2rem;
          }

          canvas {
            width: 100% !important;
            height: 250px !important;
          }

          .shift-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
          }

          .bar-track {
            flex: 1;
            height: 10px;
            background: #f1f1f1;
            border-radius: 10px;
            margin: 0 10px;
            position: relative;
          }

          .bar-fill {
            height: 100%;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            border-radius: 10px;
          }
        </style>
      
      <div class="card-row">
        <!-- Card 1 -->
        <div class="col-md-3 card">
          <div class="card-header">
            <span>Total Safety Violations</span>
            <span class="menu">⋯</span>
          </div>
          <div class="card-content">
            <span class="main-value">1451</span>
            <img src="../static/images/Box.png" class="icon" alt="icon" />
          </div>
        </div>

        <!-- Card 2 -->
        <div class="col-md-3 card">
          <div class="card-header">
            <span>Compliance Rate</span>
            <span class="menu">⋯</span>
          </div>
          <div class="card-content">
            <span class="main-value">74%</span>
            <img src="../static/images/Box.png" class="icon" alt="icon" />
          </div>
        </div>

        <!-- Card 3 (Highlighted) -->
        <div class="col-md-2 card-highlight ">
          <div class="card-header small-text">Avg. Severity Level</div>
          <div class="card-content center">
            <span class="main-values">Med</span>
          </div>
        </div>

        <!-- Card 4 -->
        <div class="col-md-2 card">
          <div class="card-header">
            <span>Empty Slot</span>
            <span class="menu">⋯</span>
          </div>
          <div class="card-content">
            <span class="main-value">51</span>
            <!-- <img src="../static/images/Box.png" class="icon" alt="icon"/> -->
          </div>
        </div>


        <!-- Card 5 -->
        <div class="col-md-2 card">
          <div class="card-header">
            <span>Out Of Stock</span>
            <span class="menu">⋯</span>
          </div>
          <div class="card-content">
            <span class="main-value">14</span>
            <!-- <img src="../static/images/Box.png" class="icon" alt="icon"/> -->
          </div>
        </div>

      </div>



      <!-- Charts -->




      <style>
        body {
          font-family: 'Segoe UI', sans-serif;
          margin: 0;
          background: #f8fafc;
          padding: 2rem;
        }

        .dashboard {
          display: grid;
          grid-template-columns: 2fr 1fr;
          gap: 2rem;
        }

        .grow {
          display: contents;
        }

        .gcard {
          background: #fff;
          padding: 1.5rem;
          border-radius: 12px;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        h3 {
          margin-top: 0;
          margin-bottom: 1rem;
          color: #1e293b;
        }

        .chart-container {
          height: 260px;
        }

        canvas {
          width: 100% !important;
          height: 100% !important;
        }

        .subcard {
          background: #fff;
          padding: 0.8rem 1rem;
          border-radius: 10px;
          margin-bottom: 0.5rem;
          border: 1px solid #767474A1;

        }

        .subcard strong {
          color: #0f172a;
        }

        .section-title {
          font-weight: 600;
          margin-bottom: 0.6rem;
          font-size: 0.95rem;
          display: flex;
          align-items: center;
          color: #334155;
        }

        .dot {
          width: 10px;
          height: 10px;
          display: inline-block;
          border-radius: 50%;
          margin-right: 6px;
        }

        .dot-orange {
          background-color: #f97316;
        }

        .dot-yellow {
          background-color: #facc15;
        }

        .dot-green {
          background-color: #10b981;
        }

        .status-tag {
          font-size: 0.75rem;
          padding: 0.2rem 0.5rem;
          border-radius: 10px;
          display: inline-block;
          margin-top: 0.5rem;
        }

        .tag-red {
          background: #fee2e2;
          color: #b91c1c;
        }

        .tag-green {
          background: #dcfce7;
          color: #15803d;
        }

        .tag-yellow {
          background: #fef3c7;
          color: #b45309;
        }

        .mini-card {
          margin-bottom: 1rem;
          height: 50%;
          display: flex;
        }

        .l {
          width: 220px;
          height: 100px;
          margin: 15px;
        }

        .r {
          margin-left: 100px;
          width: 200px;
          height: 80px;
        }

        .clex {
          display: flex;
          justify-content: space-between;
          padding: 1px 1px 1px 1px;

        }

        .subercard {
          background: #fff;
          border-bottom: 1px solid #00000080;
          padding: 0.5rem 1rem;
          border-radius: 1px;
          margin-bottom: 0.5rem;
          border-color: #00000080;
          width: 100%;
          height: 10 0px;
        }

        .suber-conr {
          font-size: 12px;
          font-weight: 400;
          color: #767474;
        }

        .suber-heading {
          font-weight: 500;
          color: #0f172a;
          font-size: 18px;
        }

        .suber-subheading {
          font-size: 14px;
          font-weight: 400;
          color: #1C1C1C;

        }

        .sub-head {
          font-size: 30px;
          font-weight: 400;
          color: #0f172a;
        }

        #sub-head {
          font-size: 17px;
          font-weight: 400;
          color: #1C1C1C;
        }

        .sub-cont {
          font-size: 12 px;
          font-weight: 400;
          color: #767474;
        }

        .shelf {
          display: flex;


        }

        @media (max-width: 1024px) {
          .dashboard {
            grid-template-columns: 1fr;
          }
        }


      

      </style>

      <style>
        .ai-gcard {
      background: white;
      border-radius: 15px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
      padding: 20px;
      width: 100%;
      max-width: 700px;
      margin: auto;
    }

    .ai-gcard h3 {
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }

    .ai-chart-container {
      position: relative;
      height: 250px;
      width: 100%;
    }


      .oprlegend {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
            margin-top: 4px;
          }

          .oprlegend span {
            display: inline-flex;
            align-items: center;
            gap: 5px;
          }

          .oprlegend-dot {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            display: inline-block;
          }
      </style>

      <div class="dashboard">




        <!-- Row 1 -->
        <div class="grow">
          <div class="gcard">
            <h3>Aisle Utilisation</h3>
            <div class="ai-chart-container">
              <canvas id="aisleChart"></canvas>
            </div>
          </div>
          <div class="gcard">
            <h3>Replenishment Event</h3>
            <div class="section-title"><span class="dot dot-orange"></span>Need Replenishment</div>
            <div class="clex">
              <div class="subcard l">
                <div><strong>Mild Steel Sheet</strong> – A09/R02/S08</div>
                <div class="status-tag tag-red">High</div>
              </div>
              <div class="subcard l ">
                <div><strong>Fasteners</strong> – A01/R05/S06</div>
                <div class="status-tag tag-green">Low</div>
              </div>
            </div>
            <div class="section-title"><span class="dot dot-yellow"></span>Replenishment In Progress</div>
            <div class="clex">
              <div class="subcard l">
                <div><strong>CLC Cutting Tool</strong> – A08/R05/S08</div>
                <div class="status-tag tag-green">Replenished</div>
              </div>
              <div class="subcard l">
                <div><strong>Cloth Sack</strong> – A02/S02</div>
                <div class="status-tag tag-yellow">Replenishing</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Row 2 -->
        <div class="grow">
          <div class="gcard">
            <h3>Restock vs Reschedule Time</h3>
            <div class="chart-container-r">
              <canvas id="restockChart"></canvas>
            </div>
          </div>
          <div class="card">
            <h3>Stock Alert</h3>

            <div class="clex">
              <div class="subcard l">
                <div><strong class="sub-head">25</strong> <span id="sub-head">item</span></div>
                <div class="sub-cont">Expiry: Under 10 days</div>
              </div>
              <div class="subcard l">
                <div><strong class="sub-head">14</strong><span id="sub-head">item</span></div>
                <div class="sub-cont">Expiry: Under 30 days</div>
              </div>
            </div>
            <!-- <p><strong>25</strong> items expire in < 10 days</p> -->
            <!-- <p><strong>14</strong> items expire in < 30 days</p> -->
            <div class="subercard">
              <div class="clex">
                <strong class="suber-heading">CLC Cutting Tool</strong>
                <p class="suber-conr">Expiry: 2 days</p>
              </div>
              <div class="clex"><strong class="suber-subheading">A08/R05/S08</strong>
                <p class="status-tag tag-red">High</p>
              </div>
              <!-- <div class="status-tag tag-red">2 days</div> -->
            </div>
            <div class="subercard">
              <div class="clex">
                <strong class="suber-heading">CLC Cutting Tool</strong>
                <p class="suber-conr">Expiery:3 days</p>
              </div>
              <div class="clex"><strong class="suber-subheading">A08/R05/S08</strong>
                <p class="status-tag tag-red">High</p>
              </div>
              <!-- <div class="status-tag tag-red">2 days</div> -->
            </div>
            <div class="subercard">
              <div class="clex"><strong class="suber-heading">CLC Cutting Tool</strong>
                <p class="suber-conr">Expiery:3 days</p>
              </div>
              <div class="clex"><strong class="suber-subheading">A08/R05/S08</strong>
                <p class="status-tag tag-red">high</p>
              </div>
              <!-- <div class="status-tag tag-red">2 days</div> -->
            </div>

          </div>

          <!-- Row 3 -->
          <div class="grow">
            <div class="gcard">
              <h3>Empty Slots by Aisle</h3>
              <div class="chart-container-e">
                <canvas id="emptySlotsChart"></canvas>
              </div>
            </div>
            <div>
              <div class="card mini-card">
                <div class="shelf">
                  <h3 style="font-weight:550; font-size:20px;">Overstock Shelves</h3>
                  <img src="../static/images/Repeat.png" alt="" style=" width: 25px; height: 25px; margin-left: 50%">
                </div>

                <p style="color:#f97316; font-weight:400; font-size:33px;">A02/S07, A01/S02</p>
              </div>
              <div class="card mini-card">
                <div class="shelf">
                  <h3 style="font-weight:550; font-size:20px;">Shelf with Often Critical Level</h3>
                  <img src="../static/images/Repeat.png" alt="" style=" width: 25px; height: 25px; margin-left: 30%">
                </div>

                <p style="color:#dc2626; font-weight:400; font-size:33px;">A07/S04</p>
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="col-md-12"> -->
          
        <!-- </div> -->



      </div>
     

    <script>
    const ctxa = document.getElementById('aisleChart').getContext('2d');

    const gradienta = ctxa.createLinearGradient(0, 0, 0, 250);
    gradienta.addColorStop(0, 'rgba(34,197,94,0.2)');  // Top (light green)
    gradienta.addColorStop(1, 'rgba(34,197,94,0)');    // Bottom (transparent)

    new Chart(ctxa, {
      type: 'line',
      data: {
        labels: [...Array(24).keys()].map(i => i + 1),
        datasets: [{
          label: 'Aisle Utilisation Over Time',
          data: [70, 80, 60, 65, 85, 90, 75, 95, 70, 85, 80, 78, 76, 74, 70, 72, 68, 66, 64, 60, 58, 65, 70, 75],
          fill: true,
          backgroundColor: gradienta,
          borderColor: '#22c55e',
          tension: 0.4,
          pointRadius: 0,
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            mode: 'index',
            intersect: false
          }
        },
        scales: {
          x: {
            grid: { display: false },
            ticks: { color: '#6b7280' }
          },
          y: {
            beginAtZero: true,
            min: 20,
            max: 100,
            ticks: {
              stepSize: 20,
              color: '#6b7280'
            },
            grid: {
              color: '#e5e7eb',
              borderDash: [4, 4]
            }
          }
        }
      }
    });
  </script>


  <script>
    const restockCtx = document.getElementById('restockChart').getContext('2d');

new Chart(restockCtx, {
  type: 'bar',
  data: {
    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
    datasets: [
      {
        label: 'Restock Time (hrs)',
        data: [5, 6, 4, 7, 5, 3, 4],
        backgroundColor: '#34d399', // green
        borderRadius: 5
      },
      {
        label: 'Reschedule Time (hrs)',
        data: [3, 2, 5, 2, 3, 4, 2],
        backgroundColor: '#60a5fa', // blue
        borderRadius: 5
      }
    ]
  },
  options: {
    responsive: true,
    plugins: {
      tooltip: {
        mode: 'index',
        intersect: false
      },
      legend: {
        position: 'top'
      }
    },
    interaction: {
      mode: 'nearest',
      axis: 'x',
      intersect: false
    },
    scales: {
      y: {
        beginAtZero: true,
        title: {
          display: true,
          text: 'Hours'
        }
      }
    }
  }
});

  </script>


    <script>
      const ctxl = document.getElementById('lineChart').getContext('2d');

const months = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
const rescheduleData = [10, 6, 3, 2, 5, 10, 14, 17, 13, 8, 4, 2];
const restockData = [1, 2, 5, 8, 17, 12, 8, 6, 6, 7, 12, 13];

const chart = new Chart(ctxl, {
  type: 'line',
  data: {
    labels: months,
    datasets: [
      {
        label: 'Reschedule Time',
        data: rescheduleData,
        borderColor: '#00a3ff',
        backgroundColor: '#00a3ff33',
        fill: false,
        tension: 0.4,
        pointBackgroundColor: '#00a3ff',
        pointRadius: 4
      },
      {
        label: 'Restock Time',
        data: restockData,
        borderColor: '#f4b400',
        backgroundColor: '#f4b40033',
        fill: false,
        tension: 0.4,
        pointBackgroundColor: '#f4b400',
        pointRadius: 4
      }
    ]
  },
  options: {
    responsive: true,
    plugins: {
      legend: {
        position: 'top',
        labels: {
          usePointStyle: true
        }
      },
      tooltip: {
        enabled: true
      }
    },
    onClick: (e, elements) => {
      if (elements.length > 0) {
        const datasetIndex = elements[0].datasetIndex;
        const dataIndex = elements[0].index;
        const datasetLabel = chart.data.datasets[datasetIndex].label;
        const value = chart.data.datasets[datasetIndex].data[dataIndex];
        const month = chart.data.labels[dataIndex];
        document.getElementById('tooltipBox').innerText =
          `Clicked on ${datasetLabel} for ${month}: ${value}`;
      }
    },
    scales: {
      y: {
        beginAtZero: true,
        suggestedMax: 24
      }
    }
  }
});

    </script>
        <script>
          // Chart.js: Renders Aisle Utilisation, Restock vs Reschedule, and Empty Slots charts.
        
          new Chart(document.getElementById('emptySlotsChart'), {
            type: 'bar',
            data: {
              labels: ["Aisle 1", "Aisle 2", "Aisle 3", "Aisle 4", "Aisle 5", "Aisle 6", "Aisle 7", "Aisle 8", "Aisle 9", "Aisle 10"],
              datasets: [{
                data: [90, 80, 75, 95, 60, 85, 88, 70, 60, 78],
                backgroundColor: '#3b82f6'
              }]
            },
            options: { responsive: true, scales: { y: { beginAtZero: true } } }
          });
        </script>





<div class="card-transit p-4 bg-white mb-4" style="margin-top: 35px;">
            <h5 class="mb-3" style="font-size: 25px; font-weight:500;">Time- Based Shelf Utilisation</h5>
            <div class="oprlegend">
              <span class="legend-item" style="color: #9291A5; font-size:10px;"><span class="oprlegend-dot" style="background:#D1F8FF;"></span>Below</span>
              <span class="legend-item" style="color: #9291A5;"><span class="oprlegend-dot" style="background:#FFC518;"></span>Warning</span>
              <span class="legend-item" style="color: #9291A5;"><span class="oprlegend-dot" style="background:#3A974C;"></span> optimal</span>
              <span class="legend-item" style="color: #9291A5;"><span class="oprlegend-dot" style="background:#FF5900;"></span>Caution</span>
            </div>
            <div class="chart-container">
              <div id="loadingChart"></div>
            </div>
          </div>

        <!-- Right Column with single card containing two sections -->



        <!-- Production Log Table -->
        <!-- <div class="container py-4">
        <div class="row g-4 align-items-stretch"> -->

        <!-- Left: Worker Compliance History (2/3) -->
        <!-- Loading-Unloading Cycle Chart Card -->
        
        <style>
          .chart-container {
            width: 100%;
            overflow-x: auto;
            padding: 10px
          }

          .chart-container-r {
            width: 100%;
            height: auto;
            overflow-x: auto;
            padding: 10px
          }
          #loadingChart {
            display: flex;
            flex-direction: column;
            gap: 12px;
          }

          .chart-row {
            display: flex;
            align-items: center;
            font-size: 12px;
          }

          .chart-row span {
            width: 50px;
            flex-shrink: 0;
          }

          .bar-container {
            flex-grow: 1;
            display: flex;
            height: 20px;
          }

          .bar {
            height: 100%;
          }

          .loading {
            background-color: #FFC518;
          }

          .unloading {
            background-color: #3A974C
          }

          .idle {
            background-color: #FF5900;
          }

          .space{
            background-color: #D1F8FF;
          }
          .legend-item {
            font-size: 12px;
            margin-right: 15px;
          }

          @media (max-width: 768px) {
            .chart-row span {
              width: 40px;
              font-size: 11px;
            }

            .legend-item {
              font-size: 11px;
            }
          }
        </style>

        <!-- <script>
          /*
            Custom bar chart for Time-Based Shelf Utilisation.
            Dynamically creates rows for each shelf, with colored segments for loading, unloading, and idle states.
          */
          const chartData = [
            { date: 'Shelve G ', segments: ['loading', 'idle', 'unloading', 'idle', 'loading'] },
            { date: 'Shelve F', segments: ['unloading', 'idle', 'loading', 'idle', 'unloading'] },
            { date: 'Shelve E', segments: ['idle', 'loading', 'unloading', 'idle', 'loading'] },
            { date: 'Shelve D', segments: ['loading', 'unloading', 'idle', 'loading', 'idle'] },
            { date: 'Shelve C', segments: ['idle', 'loading', 'unloading', 'idle', 'loading'] },
            { date: 'Shelve B', segments: ['loading', 'unloading', 'idle', 'unloading', 'idle'] },
            { date: 'Shelve A', segments: ['unloading', 'idle', 'loading', 'unloading', 'idle'] },
          ];

          const chartContainer = document.getElementById('loadingChart');

          chartData.forEach(row => {
            const rowDiv = document.createElement('div');
            rowDiv.className = 'chart-row';

            const label = document.createElement('span');
            label.textContent = row.date;
            rowDiv.appendChild(label);

            const barContainer = document.createElement('div');
            barContainer.className = 'bar-container';

            const segmentWidth = 100 / row.segments.length;

            row.segments.forEach(type => {
              const bar = document.createElement('div');
              bar.className = `bar ${type}`;
              bar.style.width = `${segmentWidth}%`;
              barContainer.appendChild(bar);
            });

            rowDiv.appendChild(barContainer);
            chartContainer.appendChild(rowDiv);
          });
        </script> -->
<script>
  /*
    Dynamic bar chart for Time-Based Shelf Utilisation.
    Randomizes segments per shelf for idle, loading, and unloading states.
  */

  const chartData = [
    { date: 'Shelve G' },
    { date: 'Shelve F' },
    { date: 'Shelve E' },
    { date: 'Shelve D' },
    { date: 'Shelve C' },
    { date: 'Shelve B' },
    { date: 'Shelve A' },
  ];

  const states = ['loading', 'idle', 'unloading', 'space'];

  function generateRandomSegments(min = 3, max = 7) {
    const segmentCount = Math.floor(Math.random() * (max - min + 1)) + min;
    const segments = [];
    for (let i = 0; i < segmentCount; i++) {
      const randomState = states[Math.floor(Math.random() * states.length)];
      segments.push(randomState);
    }
    return segments;
  }

  const chartContainer = document.getElementById('loadingChart');

  chartData.forEach(row => {
    const rowDiv = document.createElement('div');
    rowDiv.className = 'chart-row';

    const label = document.createElement('span');
    label.textContent = row.date;
    rowDiv.appendChild(label);

    const barContainer = document.createElement('div');
    barContainer.className = 'bar-container';

    const segments = generateRandomSegments();
    const segmentWidth = 100 / segments.length;

    segments.forEach(type => {
      const bar = document.createElement('div');
      bar.className = `bar ${type}`;
      bar.style.width = `${segmentWidth}%`;
      barContainer.appendChild(bar);
    });

    rowDiv.appendChild(barContainer);
    chartContainer.appendChild(rowDiv);
  });
</script>


        <div class="card-transit p-4 bg-white">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <!-- Left side: Title + icon -->
            <h4 style="font-size:25px; font-weight:500; margin-bottom: 0;">
              Stock Level Management
              <img src="/static/images/i_icon.png" class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top"
                title="Chronological log of production activities." />
            </h4>

            <!-- Right side: Yellow circular button -->
            <a href="{{ url_for('inventory_log') }}" class="btn btn-sm"
              style="background-color: #F5A623; color:white; border-radius: 50%; width: 24px; height: 25px; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 18px; font-weight: bold;">
              &gt;
            </a>
          </div>

          <div class="table-responsive">
            <table class="table table-bordered align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th>Video ID</th>
                  <th>Item ID/Name</th>
                  <th>Category</th>
                  <th>Last Stock Date</th>
                  <th>Severity</th>
                  <th>Location</th>
                  <th>Required Quantity</th>
                  <th>Status</th>
                  <th>Replenishment Event</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>W-203</td>
                  <td>MS101/Mild Steel Sheets</td>
                  <td>Raw Material</td>
                  <td>2025.05.22</td>
                  <td>High</td>
                  <td>A09/R02/S08</td>
                  <td>42</td>
                  <td>Out-of Stock</td>
                  <td> - </td>
                </tr>
                <tr>
                  <td>W-175</td>
                  <td>HO-009/Hydraulic Oil</td>
                  <td>Consumable</td>
                  <td>2025.05.20</td>
                  <td>High</td>
                  <td>A09/R11/S04</td>
                  <td>12</td>
                  <td>Low Stock</td>
                  <td> - </td>
                </tr>
                <tr>
                  <td>W-566</td>
                  <td>CP-302 Control Panel Relay</td>
                  <td>Electrical Parts</td>
                  <td>2025.05.15</td>
                  <td>High</td>
                  <td>A01/R07/S03</td>
                  <td>15</td>
                  <td>Replenished</td>
                  <td> 14 </td>
                </tr>
                 <tr>
                  <td>W-566</td>
                  <td>CP-302 Control Panel Relay</td>
                  <td>Electrical Parts</td>
                  <td>2025.05.15</td>
                  <td>High</td>
                  <td>A01/R07/S03</td>
                  <td>15</td>
                  <td>Replenished</td>
                  <td> 14 </td>
                </tr>
                 <tr>
                  <td>W-566</td>
                  <td>CP-302 Control Panel Relay</td>
                  <td>Electrical Parts</td>
                  <td>2025.05.15</td>
                  <td>High</td>
                  <td>A01/R07/S03</td>
                  <td>15</td>
                  <td>Replenished</td>
                  <td> 14 </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>





        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>




        <!-- [ Main Content ] end -->

        <!-- Required Js -->
        <script src="{{ url_for('static' , filename='js/vendor-all.min.js') }} "></script>
        <script src="{{ url_for('static' , filename='js/plugins/bootstrap.min.js') }} "></script>
        <!-- <script src="{{ url_for('static' , filename='js/ripple.js') }} "></script> -->
        <script src="{{ url_for('static' , filename='js/pcoded.min.js') }} "></script>

        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>



        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
        <!-- custom-chart js -->

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
          document.addEventListener("DOMContentLoaded", function () {
            // Hide loader when page is fully loaded
            document.getElementById("loadingScreen").style.display = "none";

            // Handle Analytics dropdown toggle (to ensure it opens)
            document.querySelector(".analytics-exclude > a").addEventListener("click", function (event) {
              event.preventDefault(); // Prevent default link behavior
              let submenu = this.nextElementSibling; // Target submenu
              if (submenu && submenu.classList.contains("pcoded-submenu")) {
                submenu.style.display = submenu.style.display === "none" || submenu.style.display === "" ? "block" : "none";
              }
            });

            // Show loader for all links except the Analytics dropdown itself
            document.querySelectorAll(".nav-item a").forEach(function (navLink) {
              navLink.addEventListener("click", function (event) {
                let parentItem = this.closest(".nav-item");

                // If the clicked link is NOT the main Analytics tab, show spinner
                if (!parentItem.classList.contains("analytics-exclude") || this.closest(".pcoded-submenu")) {
                  document.getElementById("loadingScreen").style.display = "flex";
                }
              });
            });
          });
        </script>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
          // Chart.js: Package Handling chart with gradient fill for visualizing package data over 24 hours.
          const ctx = document.getElementById('packageHandleChart').getContext('2d');

          // Create gradient
          const gradient = ctx.createLinearGradient(0, 0, 0, 300);
          gradient.addColorStop(0, 'rgba(255, 99, 132, 0.3)');
          gradient.addColorStop(1, 'rgba(255, 99, 132, 0)');

          const packageChart = new Chart(ctx, {
            type: 'line',
            data: {
              labels: Array.from({ length: 24 }, (_, i) => i + 1), // 1 to 24
              datasets: [{
                label: 'Packages',
                data: [60, 55, 70, 65, 90, 78, 70, 75, 72, 68, 66, 64, 62, 65, 63, 60, 55, 50, 52, 54, 56, 58, 60, 75],
                borderColor: 'orange',
                backgroundColor: gradient,
                fill: true,
                tension: 0.5,
                cubicInterpolationMode: 'monotone',
                pointRadius: 2,
                pointHoverRadius: 5
              }]
            },
            options: {
              responsive: true,
              plugins: {
                legend: {
                  display: true
                }
              },
              scales: {
                y: {
                  min: 0,
                  max: 100,
                  ticks: {
                    stepSize: 20
                  }
                }
              }
            }
          });
        </script>



        <script>
          // Chart.js: Compliance chart for monthly compliance data.
          new Chart(document.getElementById('complianceChart'), {
            type: 'line',
            data: {
              labels: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'],
              datasets: [{
                label: 'Compliance',
                data: [400, 500, 600, 850, 650, 700, 680, 720, 710, 750, 770, 800],
                fill: true,
                borderColor: '#00bcd4',
                backgroundColor: 'rgba(0,188,212,0.2)',
                pointBackgroundColor: '#00bcd4',
                tension: 0.4
              }]
            },
            options: {
              responsive: true,
              scales: { y: { beginAtZero: true, max: 1000 } },
              plugins: { legend: { display: false } }
            }
          });
        </script>


        <script>
          // Bootstrap tooltips initialization for info icons.
          document.addEventListener('DOMContentLoaded', function () {
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            tooltipTriggerList.map(function (tooltipTriggerEl) {
              return new bootstrap.Tooltip(tooltipTriggerEl)
            });
          });
        </script>

</body>

</html>